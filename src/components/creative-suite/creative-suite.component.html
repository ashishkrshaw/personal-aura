<div class="max-w-4xl mx-auto">
  <h2 class="text-2xl font-bold text-purple-500 dark:text-purple-300 mb-4">Creative Suite</h2>

  <div class="flex border-b border-gray-200 dark:border-gray-700 mb-6">
    <button (click)="selectTab('image')" [class]="'px-4 py-2 font-semibold transition-colors ' + (activeTab() === 'image' ? 'border-b-2 border-purple-500 text-purple-600 dark:text-purple-400' : 'text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white')">
      <i class="fas fa-image mr-2"></i>Image Generation
    </button>
    <button (click)="selectTab('video')" [class]="'px-4 py-2 font-semibold transition-colors ' + (activeTab() === 'video' ? 'border-b-2 border-purple-500 text-purple-600 dark:text-purple-400' : 'text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white')">
      <i class="fas fa-film mr-2"></i>Video Generation
    </button>
  </div>

  @if (activeTab() === 'image') {
    <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg shadow-lg">
      <h3 class="text-xl font-semibold mb-3">Generate an Image</h3>
      <textarea [(ngModel)]="imagePrompt" placeholder="e.g., A neon hologram of a cat driving at top speed" class="w-full bg-white dark:bg-gray-700 text-gray-800 dark:text-white p-3 rounded-md border border-gray-300 dark:border-gray-600 h-24 focus:ring-purple-500 focus:border-purple-500"></textarea>
      
      <div class="my-4">
        <label class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">Aspect Ratio</label>
        <select [(ngModel)]="imageAspectRatio" class="w-full bg-white dark:bg-gray-700 text-gray-800 dark:text-white p-3 rounded-md border border-gray-300 dark:border-gray-600 focus:ring-purple-500 focus:border-purple-500">
          <option value="1:1">Square (1:1)</option>
          <option value="16:9">Landscape (16:9)</option>
          <option value="9:16">Portrait (9:16)</option>
          <option value="4:3">Standard (4:3)</option>
          <option value="3:4">Tall (3:4)</option>
        </select>
      </div>
      
      <button (click)="generateImage()" [disabled]="isGeneratingImage()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center disabled:bg-purple-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed">
         @if (isGeneratingImage()) {
          <i class="fas fa-spinner fa-spin mr-2"></i>
          <span>Generating...</span>
        } @else {
          <i class="fas fa-paint-brush mr-2"></i>
          <span>Generate Image</span>
        }
      </button>

      @if (generatedImageUrl()) {
        <div class="mt-6">
          <img [src]="generatedImageUrl()" alt="Generated Image" class="rounded-lg shadow-lg w-full max-w-lg mx-auto">
        </div>
      }
    </div>
  }

  @if (activeTab() === 'video') {
     <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg shadow-lg">
      <h3 class="text-xl font-semibold mb-3">Generate a Video</h3>
      <textarea [(ngModel)]="videoPrompt" placeholder="e.g., A robot holding a red skateboard in a futuristic city" class="w-full bg-white dark:bg-gray-700 text-gray-800 dark:text-white p-3 rounded-md border border-gray-300 dark:border-gray-600 h-24 focus:ring-purple-500 focus:border-purple-500"></textarea>
      
      <div class="my-4">
        <label class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">Seed Image (Optional)</label>
        @if (videoImageFile()) {
          <div class="flex items-center gap-4 bg-gray-100 dark:bg-gray-700 p-2 rounded-md">
            <i class="fas fa-check-circle text-green-500"></i>
            <span class="text-gray-700 dark:text-gray-300 truncate">{{ videoImageFile()?.name }}</span>
            <button (click)="removeImage()" class="ml-auto text-gray-500 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400"><i class="fas fa-times"></i></button>
          </div>
        } @else {
          <label class="w-full flex items-center justify-center px-4 py-3 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-md shadow-sm tracking-wide border border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-800 dark:hover:text-white">
            <i class="fas fa-upload mr-2"></i>
            <span class="text-base leading-normal">Select an image</span>
            <input type='file' class="hidden" (change)="onFileSelected($event)" accept="image/*" />
          </label>
        }
      </div>

      <div class="my-4">
        <label class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1">Aspect Ratio</label>
        <select [(ngModel)]="videoAspectRatio" class="w-full bg-white dark:bg-gray-700 text-gray-800 dark:text-white p-3 rounded-md border border-gray-300 dark:border-gray-600 focus:ring-purple-500 focus:border-purple-500">
          <option value="16:9">Landscape (16:9)</option>
          <option value="9:16">Portrait (9:16)</option>
        </select>
      </div>

      <button (click)="generateVideo()" [disabled]="isGeneratingVideo()" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center disabled:bg-purple-400 dark:disabled:bg-gray-600 disabled:cursor-not-allowed">
         @if (isGeneratingVideo()) {
          <i class="fas fa-spinner fa-spin mr-2"></i>
          <span>Generating Video...</span>
        } @else {
          <i class="fas fa-video mr-2"></i>
          <span>Generate Video</span>
        }
      </button>

      @if (isGeneratingVideo()) {
        <div class="mt-6 text-center bg-gray-100/50 dark:bg-gray-700/50 p-4 rounded-lg">
          <p class="text-purple-600 dark:text-purple-300">{{ videoGenerationStatus() }}</p>
          <p class="text-sm text-gray-500 dark:text-gray-400">Please keep this tab open.</p>
        </div>
      }

      @if (generatedVideoUrl()) {
        <div class="mt-6">
          <video controls [src]="generatedVideoUrl()" class="rounded-lg shadow-lg w-full max-w-lg mx-auto"></video>
        </div>
      }
     </div>
  }
</div>